<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWA 圖標生成器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        canvas {
            border: 2px solid #333;
            border-radius: 12px;
        }
    </style>
</head>
<body class="bg-gray-900 text-white p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">物料戰情室 - PWA 圖標生成器</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- 左側：設定 -->
            <div class="space-y-4">
                <div class="bg-gray-800 p-6 rounded-xl">
                    <h2 class="text-xl font-bold mb-4">圖標設定</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">背景顏色</label>
                            <input type="color" id="bgColor" value="#000000" class="w-full h-12 rounded-lg">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">文字顏色</label>
                            <input type="color" id="textColor" value="#8b5cf6" class="w-full h-12 rounded-lg">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">圖標文字</label>
                            <input type="text" id="iconText" value="物料" class="w-full px-4 py-2 bg-gray-700 rounded-lg text-white" maxlength="4">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">字體大小</label>
                            <input type="range" id="fontSize" min="60" max="120" value="80" class="w-full">
                            <span id="fontSizeValue" class="text-sm text-gray-400">80px</span>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-800 p-6 rounded-xl">
                    <h2 class="text-xl font-bold mb-4">下載圖標</h2>
                    <div class="space-y-2">
                        <button onclick="downloadIcon(192)" class="w-full bg-purple-600 hover:bg-purple-700 px-4 py-3 rounded-lg font-bold">
                            下載 192x192 圖標
                        </button>
                        <button onclick="downloadIcon(512)" class="w-full bg-purple-600 hover:bg-purple-700 px-4 py-3 rounded-lg font-bold">
                            下載 512x512 圖標
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 右側：預覽 -->
            <div class="space-y-4">
                <div class="bg-gray-800 p-6 rounded-xl">
                    <h2 class="text-xl font-bold mb-4">預覽</h2>
                    <div class="flex flex-col items-center gap-4">
                        <div>
                            <p class="text-sm text-gray-400 mb-2">192x192 (主圖標)</p>
                            <canvas id="canvas192" width="192" height="192"></canvas>
                        </div>
                        <div>
                            <p class="text-sm text-gray-400 mb-2">512x512 (高解析度)</p>
                            <canvas id="canvas512" width="512" height="512"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function drawIcon(canvas, size) {
            const ctx = canvas.getContext('2d');
            const bgColor = document.getElementById('bgColor').value;
            const textColor = document.getElementById('textColor').value;
            const text = document.getElementById('iconText').value || '物料';
            const fontSize = parseInt(document.getElementById('fontSize').value);
            
            // 清空畫布
            ctx.clearRect(0, 0, size, size);
            
            // 繪製背景
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, size, size);
            
            // 繪製文字
            ctx.fillStyle = textColor;
            ctx.font = `bold ${fontSize * (size / 192)}px -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, size / 2, size / 2);
        }
        
        function updatePreview() {
            drawIcon(document.getElementById('canvas192'), 192);
            drawIcon(document.getElementById('canvas512'), 512);
            document.getElementById('fontSizeValue').textContent = document.getElementById('fontSize').value + 'px';
        }
        
        function downloadIcon(size) {
            const canvas = document.getElementById('canvas' + size);
            const link = document.createElement('a');
            link.download = `icon-${size}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        // 監聽變化
        document.getElementById('bgColor').addEventListener('input', updatePreview);
        document.getElementById('textColor').addEventListener('input', updatePreview);
        document.getElementById('iconText').addEventListener('input', updatePreview);
        document.getElementById('fontSize').addEventListener('input', updatePreview);
        
        // 初始化
        updatePreview();
    </script>
</body>
</html>

